{% extends '@Zectranet/index.html.twig' %}

{% block title %}{{ task.name }}{% endblock %}

{% block body %}
    <div ng-cloak>
        <div class="page-header">
            <h1>
            <i class="fa fa-user"></i>
            {{ task.name }}
            </h1>
        </div>

        <div class="row">
            <!--Begin of Main Task Info-->
            <form class="col-md-6" action="{{ path('zectranet_task_edit_main_info', { 'task_id': task.id }) }}" method="post">
                <div class="page-header" style="margin-top: 0;">
                    <span style="font-size: 20px;">Task Info</span>
                </div>

                <div class="row" style="margin-bottom: 10px;">
                    <div class="col-md-3">
                        <div class="input-group">
                            <label class="text-muted  form-control-static">Name:</label>
                        </div>
                    </div>

                    <div class="col-md-9">
                        <div class="input-group">
                            <input type="text" style="border: none;" class="form-control" value="{{ task.name }}">
                        </div>

                    </div>
                </div>

                <div class="row" style="margin-bottom: 10px;">
                    <div class="col-md-3">
                        <div class="input-group">
                            <label class="text-muted form-control-static">Type:</label>
                        </div>
                    </div>

                    <div class="col-md-9">
                        <div class="input-group">
                            <select class="form-control" style="border: none;">
                                {% for type in task_types %}
                                    <option style="color: {{ type.color }}" value="{{ type.id }}"
                                            {% if type.id == task.type.id %}
                                                selected="selected"
                                            {% endif %}>
                                        {{ type.label }}
                                    </option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <div class="page-header" style="margin-top: 0;"></div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <button type="submit" class="btn btn-default btn-primary">Save</button>
                        </div>
                    </div>
                </div>
            </form>
            <!--End of Main Task Info-->

            <!--Begin of Task Details-->
            <form class="col-md-6" action="{{ path('zectranet_task_edit_detail_info', { 'task_id': task.id }) }}" method="post">

                <div class="page-header" style="margin-top: 0;">
                    <span style="font-size: 20px;">Task Details</span>
                </div>

                <div class="row" style="margin-bottom: 10px;">
                    <div class="col-md-3">
                        <div class="input-group">
                            <label class="text-muted form-control-static">Assigned:</label>
                        </div>
                    </div>

                    <div class="col-md-9">
                        <div class="input-group">
                            {% if task.project.users | length > 0 %}
                                <select class="form-control" style="border: none;">
                                    {% for user in task.project.users %}
                                        {% if user.id != task.owner.id %}
                                            <option value="{{ user.id }}" {% if task.assigned == user %}selected="selected"{% endif %}>{{ user.name }}</option>
                                        {% endif %}
                                    {% endfor %}
                                    <option {% if task.assigned == null %}selected="selected"{% endif %}>Not Assigned</option>
                                </select>
                            {% else %}
                                <p class="form-control-static">Not Assigned</p>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Begin Of Task Progress Details -->
                <div class="row">
                    <div class="col-md-3">
                        <div class="input-group">
                            <label class="text-muted  form-control-static">Progress:</label>
                        </div>
                    </div>
                    <div ng-init="selected = '{{ task.progress }}'">
                        <div class="col-md-6">
                            <div style="padding: 6px 0;">
                                <div class="form-group progress progress-striped active" style="position: relative;">
                                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="[[selected]]" aria-valuemin="0" aria-valuemax="100" style="width: [[selected]]%;">
                                        <div class="text-muted text-center" align="center" style="color: black; font-weight: bold; position: absolute; left: 35%; opacity: 0.6">[[selected]]% Complete</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="input-group">
                                <select class="form-control" ng-model="selected" style="border: none;">
                                    <option value="0">0%</option>
                                    <option value="10">10%</option>
                                    <option value="20">20%</option>
                                    <option value="30">30%</option>
                                    <option value="40">40%</option>
                                    <option value="50">50%</option>
                                    <option value="60">60%</option>
                                    <option value="70">70%</option>
                                    <option value="80">80%</option>
                                    <option value="90">90%</option>
                                    <option value="100">100%</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <div class="page-header" style="margin-top: 0;"></div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <button type="submit" class="btn btn-default btn-primary">Save</button>
                        </div>
                    </div>
                </div>
                <!-- End Of Task Progress Details -->
            </form>
            <!--End of Task Details-->
        </div>

        <!-- Begin of Desciption Section -->
        <div class="row">
            <div class="col-md-12">
                <div class="page-header">
                    <h4>Description</h4>
                </div>

                <div class="row">
                    <form class="col-md-10" action="{{ path('zectranet_task_edit_descritpion', { 'task_id': task.id }) }}" method="post">
                        <div class="form-group">
                            <textarea class="form-control" style="border: none; height: 150px; resize: none;">{{ task.description }}</textarea>
                        </div>
                        <div class="form-group">
                            <button type="submit" class="btn btn-default btn-primary">Save</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}