{% extends '@Zectranet/layout.html.twig' %}

{% block title %}Index page{% endblock %}

{% block styles %}
	{{ parent() }}
{% endblock %}

{% block leftSidebar %}
	<div class="navbar-default sidebar" role="navigation">
		<div class="sidebar-nav navbar-collapse">
			<div id="quicksearch-block">
				<ul class="nav">
					<li class="sidebar-search">
						<div class="input-group custom-search-form dropdown">
							<input id="text-search" ng-model="searchInput"
								   class="form-control dropdown-toggle"
								   placeholder="Search..."
								   maxlength="50"
								   ng-keypress="pressEnter($event, '{{ path('zectranet_user_page') }}SearchPage/')"
								   ng-change="InputChange('{{ path('zectranet_user_page') }}SearchPage/')"
								   data-toggle="dropdown" type="search">
							<span class="input-group-btn">
								<a ng-href="{{ path('zectranet_user_page') }}SearchPage/[[searchInput]]" ng-click="PreCheck();" class="btn btn-default"  >
									<i class="fa fa-search"></i>
								</a>
							</span>

							<ul ng-if="searchInput.length >= 0" class="dropdown-menu open dropdown-search-ul" role="menu" style="width: 200%;" aria-labelledby="dLabel">
								<li ng-if="searchCount == 0" style="overflow-x: auto;">
									<a tabindex="-1">
										<i>Search for [[searchInput]]...</i>
									</a>
								</li>

								<li style="background-color: #495b79; color: whitesmoke;" ng-if="(searchCount > 0) && (searchInput.length > 0) && (search_projects.length > 0)">
									<p align="center" class="dropdown-header" tabindex="-1"
									   style="color: whitesmoke; padding: 1px 0; margin: 0;"></p>
								</li>
								<li ng-if="(searchCount > 0) && (searchInput.length > 0)" ng-repeat="res in search_projects" style="border-top: solid darkgray 1px;">
									<a tabindex="-1" style="padding: 3px 10px; text-overflow: ellipsis; overflow: hidden; " ng-href="{{ path('zectranet_user_page') }}office/[[res.id]]">
										<span style="font-size: 14px;" class="quicksearch-result blue-color-links"><i class="fa fa-user" style="font-size: 14px;"></i> [[res.name]]</span>
										<span style="font-size: 11px;" class="quicksearch-source">[[res.Office.name]]</span>
									</a>
								</li>

								<li style="background-color: #495b79; color: whitesmoke;" ng-if="(searchCount > 0) && (searchInput.length > 0) && (search_tasks.length > 0)">
									<p align="center" class="dropdown-header" tabindex="-1"
									   style="color: whitesmoke; padding: 1px 0; margin: 0;"></p>
								</li>
								<li ng-if="(searchCount > 0) && (searchInput.length > 0)" ng-repeat="res in search_tasks" style="border-top: solid darkgray 1px;">
									<a tabindex="-1" style="padding: 3px 10px; text-overflow: ellipsis; overflow: hidden; " ng-href="{{ path('zectranet_user_page') }}office/[[res.officeid]]/[[searchInput]]">
										<span style="font-size: 14px;" class="quicksearch-result blue-color-links"><i class="fa fa-filter" style="font-size: 14px;"></i> [[res.name]]</span>
										<span style="font-size: 11px;" class="quicksearch-source">[[res.Office.name]]</span>
									</a>
								</li>
								<li ng-if="(searchCount > 0) && (searchInput.length > 0)" ng-repeat="res in search_task_posts" style="border-top: solid darkgray 1px;">
									<a tabindex="-1" style="padding: 3px 10px; text-overflow: ellipsis; overflow: hidden; " ng-href="{{ path('zectranet_user_page') }}office/[[res.Office.officeid]]/[[searchInput]]">
										<span style="font-size: 14px;" class="quicksearch-result blue-color-links"><i class="fa fa-filter" style="font-size: 14px;"></i> [[res.message]]</span>
										<span style="font-size: 11px;" class="quicksearch-source">[[res.Office.name]]</span>
									</a>
								</li>

								<li style="background-color: #495b79;" ng-if="(searchCount > 0) && (searchInput.length > 0) && (search_chats.length > 0)">
									<p align="center" class="dropdown-header" tabindex="-1"
									   style="color: whitesmoke; padding: 1px 0; margin: 0;"></p>
								</li>
								<li ng-if="(searchCount > 0) && (searchInput.length > 0)" ng-repeat="res in search_chats" style="border-top: solid darkgray 1px;">
									<a tabindex="-1" ng-if="res.Topics == null" style="padding: 3px 10px; text-overflow: ellipsis; overflow: hidden; " ng-href="{{ path('zectranet_user_page') }}office/[[res.officeid]]/[[searchInput]]">
										<span class="quicksearch-result blue-color-links"><i class="fa fa-comments" style="font-size: 14px;"></i> [[res.message]]</span>
										<span style="font-size: 11px;" class="quicksearch-source">[[res.Offices.name]]</span>
									</a>
									<a tabindex="-1" ng-if="res.Offices == null" style="padding: 3px 10px; text-overflow: ellipsis; overflow: hidden; " ng-href="{{ path('zectranet_user_page') }}topic/[[res.topicid]]/[[searchInput]]">
										<span class="quicksearch-result blue-color-links"><i class="fa fa-comments" style="font-size: 14px;"></i> [[res.message]]</span>
										<span style="font-size: 11px;" class="quicksearch-source">[[res.Topics.name]]</span>
									</a>
								</li>
							</ul>

						</div>
					</li>
				</ul>

				<!-- BEGIN OF SITE TREE -->
				<ul class="nav" id="side-menu">

					<li class="active">
						<a href="#">
							<i class='fa fa-credit-card'></i>
							<span>Public Market</span>
						</a>
					</li>

					<li class="active">
						<a>
							<i class='fa fa-sitemap'></i>
							<span>Offices</span>
						</a>
						<ul class="nav nav-second-level">
							<li>
								<a href="#">
									<i class='fa fa-home'></i>
									<span>Private Offices</span>
								</a>
								<ul class="nav nav-third-level">
									{% for office in app.user.ownedOffices %}
										<li>
											<a href="{{ path('zectranet_show_office', {'office_id': office.id}) }}">
												<i class='fa fa-home'></i>
												<span>{{ office.name }}</span>
											</a>
										</li>
									{% endfor %}
								</ul>
							</li>

							<li>
								<a href="#">
									<i class='fa fa-sitemap'></i>
									<span>Connected Offices</span>
								</a>
								<ul class="nav nav-third-level">
									{% for office in app.user.assignedOffices %}
										<li>
											<a href="{{ path('zectranet_show_office', {'office_id': office.id}) }}">
												<i class='fa fa-sitemap'></i>
												<span>{{ office.name }}</span>
											</a>
										</li>
									{% endfor %}
								</ul>
							</li>

							<li style="display: none;">
								<a href="#" data-toggle="modal" class="btn-primary bg-primary label-primary" data-target="#add_private_office">
									<i class='fa fa-plus-circle'></i>
									<span>Add New Office</span>
								</a>
							</li>
						</ul>
					</li>

					<li class="active">
						<a>
							<i class='fa fa-briefcase'></i>
							<span>Projects</span>
						</a>
						<ul class="nav nav-second-level">
							<li>
								<a href="#">
									<i class='fa fa-briefcase'></i>
									<span>Private Projects</span>
								</a>
								<ul class="nav nav-third-level">
									{% for project in app.user.ownedProjects %}
										<li>
											<a href="{{ path('zectranet_show_project', {'project_id': project.id }) }}">
												<i class='fa fa-briefcase'></i>
												<span>{{ project.name }}</span>
											</a>
										</li>
									{% endfor %}
								</ul>
							</li>

							<li>
								<a href="#">
									<i class='fa fa-briefcase'></i>
									<span>Connected Projects</span>
								</a>
								<ul class="nav nav-third-level">
									{% for project in app.user.projects %}
										<li>
											<a href="{{ path('zectranet_show_project', {'project_id': project.id }) }}">
												<i class='fa fa-briefcase'></i>
												<span>{{ project.name }}</span>
											</a>
										</li>
									{% endfor %}
								</ul>
							</li>

							<li style="display: none;">
								<a href="#" data-toggle="modal" class="btn-primary bg-primary label-primary" data-target="#add_private_project">
									<i class='fa fa-plus-circle'></i>
									<span>Add New Project</span>
								</a>
							</li>
						</ul>
					</li>
				</ul>
				<!-- END OF SITE TREE -->

			</div>
		</div>
	</div>

	{% block modals %}

		<!-- Begin of Add New Private Office Modal -->
		<div class="modal fade" id="add_private_office" tabindex="-1" role="dialog" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header label-primary">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="myModalLabel" style="color: #f5f5f5;">
							Add New Private Office
						</h4>
					</div>
					<div class="modal-body">
						<form method="post" action="{{ path('zectranet_add_office') }}">

							<div class="form-group">
								<input type="text" class="form-control" placeholder="Office Name" name="office_name" required>
							</div>

							<div class="form-group">
								<input type="text" class="form-control" placeholder="Office Description" name="office_description" required>
							</div>

							<div class="form-group">
								<input type="submit" class="btn btn-primary" value="Add">
								<button type="button" class="btn btn-default" data-dismiss="modal" aria-hidden="true">Close</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
		<!-- End of Add New Private Office Modal -->

		<!-- Begin of Add New Private Office Modal -->
		<div class="modal fade" id="add_private_project" tabindex="-1" role="dialog" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header label-primary">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="myModalLabel" style="color: #f5f5f5; ">
							Add New Private Project
						</h4>
					</div>
					<div class="modal-body">
						<form method="post" action="{{ path('zectranet_add_project') }}">

							<div class="form-group">
								<input type="text" class="form-control" placeholder="Project Name" name="project_name" required>
							</div>

							<div class="form-group">
								<input type="text" class="form-control" placeholder="Project Description" name="project_description" required>
							</div>

							<div class="form-group">
								<input type="submit" class="btn btn-primary" value="Add">
								<button type="button" class="btn btn-default" data-dismiss="modal" aria-hidden="true">Close</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
		<!-- End of Add New Private Office Modal -->

	{% endblock %}
{% endblock %}


{% block body %}

	{% block breadcrumbs %}

	{% endblock %}

	{% block pageheader %}

	{% endblock %}

	{% block content %}

	{% endblock %}

{% endblock %}

{% block javascripts %}
	{{ parent() }}
	{#
	<script src="{{ asset('bundles/intranet/js/custom/documents.js') }}" type="text/javascript"></script>
	<script src="{{ asset('bundles/intranet/js/custom/sprint.js') }}" type="text/javascript"></script>
	<script src="{{ asset('bundles/intranet/js/custom/searchController.js') }}" type="text/javascript"></script>
	#}
{% endblock %}

